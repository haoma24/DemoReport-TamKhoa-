@model ReportManagement.Models.TaiKhoanModel
@{
    ViewBag.Title = "NgayBaoCao";
    Layout = "~/Views/Shared/_Layout.cshtml";



    string controllerName = ViewBag.viewName;
}
<style>
    .arrow {
        border: solid black;
        border-width: 0 3px 3px 0;
        display: inline-block;
        padding: 3px;
    }

    .right {
        transform: rotate(-45deg);
        -webkit-transform: rotate(-45deg);
    }

    .left {
        transform: rotate(135deg);
        -webkit-transform: rotate(135deg);
    }

    .up {
        transform: rotate(-135deg);
        -webkit-transform: rotate(-135deg);
    }

    .down {
        transform: rotate(45deg);
        -webkit-transform: rotate(45deg);
    }

    label {
        margin-left: 20px;
        width: 20px;
    }

    #datepicker {
        width: 180px;
    }

        #datepicker > span:hover {
            cursor: pointer;
        }

    #datepicker2 {
        width: 180px;
    }

        #datepicker2 > span:hover {
            cursor: pointer;
        }
</style>
<script>
    var d = new Date();
    var currMonth = d.getMonth();
    var currYear = d.getFullYear();
    var startDate = new Date(currYear, currMonth, 1);
    var lastDate = new Date(currYear, currMonth + 1, 0);
    $(function () {
        $("#datepicker").datepicker({
            autoclose: true,
            todayHighlight: true,
            format: 'dd/mm/yyyy',
        }).datepicker('setDate', startDate);
        $("#datepicker2").datepicker({
            autoclose: true,
            todayHighlight: true,
            format: 'dd/mm/yyyy',
        }).datepicker('setDate', lastDate);
    });


    document.addEventListener('DOMContentLoaded', function () {
        // Show the modal
        var myModal = new bootstrap.Modal(document.getElementById('datetimeModal'));
        myModal.show();
    });
    $(document).ready(function () {
        $('#itemDropdown').show(function () {
    var selectedId = $(this).val();
    if (selectedId) {
        $.ajax({
            url: '@Url.Action("GetItemName", "Home")',
            type: 'GET',
            data: { id: selectedId },
            success: function(response) {
                $('#itemName').text(response.name);
            },
            error: function() {
                $('#itemName').text('Lỗi: không tìm thấy!');
            }
        });
    } else {
        $('#itemName').text('');
    }
});
            $('#itemDropdown').change(function() {
                var selectedId = $(this).val();
                if (selectedId) {
                    $.ajax({
                        url: '@Url.Action("GetItemName", "Home")',
                        type: 'GET',
                        data: { id: selectedId },
                        success: function(response) {
                            $('#itemName').text(response.name);
                        },
                        error: function() {
                            $('#itemName').text('Lỗi: không tìm thấy!');
                        }
                    });
                } else {
                    $('#itemName').text('');
                }
            });
        });
</script>

@using (Html.BeginForm(controllerName, "Home", FormMethod.Post))
{
    <div class="modal fade" id="datetimeModal" tabindex="-1" aria-labelledby="datetimeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="datetimeModalLabel">Chọn ngày xem báo cáo</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="d-flex align-items-center mb-3 align-content-center">
                        <label class="control-label col-md-2">Từ:</label>
                        <div id="datepicker" class="input-group date justify-content-center align-items-center align-content-center" lang="vi" data-date-format="dd-mm-yyyy">
                            @Html.TextBox("fromDate", null, new { @class = "form-control", placeholder = "Ngày bắt đầu" })
                            <span class="input-group-addon btn btn-outline-dark"><i class="fa-solid fa-calendar-days"></i></span>
                        </div>
                    </div>
                    <div class="d-flex align-items-center mb-3 align-content-center">
                        <label class="control-label col-md-2">Đến:</label>
                        <div id="datepicker2" class="input-group date justify-content-center align-items-center align-content-center" lang="vi" data-date-format="dd-mm-yyyy">
                            @Html.TextBox("toDate", null, new { @class = "form-control", placeholder = "Ngày kết thúc" })
                            <span class="input-group-addon ms-0 btn btn-outline-dark"><i class="fa-solid fa-calendar-days "></i></span>
                        </div>
                    </div>
                    <div class="d-flex align-items-center mb-3 align-content-center">
                        @Html.LabelFor(model => model.Id, "Tài khoản", htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10 d-flex">
                            @Html.DropDownListFor(model => model.Id, (List<SelectListItem>)ViewData["TaiKhoanId"], htmlAttributes: new { @class = "form-control w-25", id = "itemDropdown" })
                            @Html.ValidationMessageFor(model => model.Id, "", new { @class = "text-danger" })
                            <div class="d-flex align-items-center p-2 w-50"><span id="itemName" class="badge text-bg-secondary"></span></div>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Xác nhận</button>
                </div>
            </div>
        </div>
    </div>
}